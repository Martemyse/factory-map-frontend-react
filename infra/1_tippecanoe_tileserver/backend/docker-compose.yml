version: "3.9"

services:
  tippecanoe:
    build:
      context: .
      dockerfile: Dockerfile.tippecanoe
    image: local/tippecanoe:latest
    working_dir: /data
    volumes:
      - ./:/data
    entrypoint: ["tippecanoe"]

  tileserver:
    image: maptiler/tileserver-gl:latest
    restart: unless-stopped
    working_dir: /data
    volumes:
      - ./:/data
    environment:
      - TILESERVER_VERBOSE=true
    ports:
      - "8080:8080"
    command: ["--verbose", "--port", "8080", "--public", "--mbtiles", "/data/factory.mbtiles"]

volumes: {}


